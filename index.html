
<<!DOCTYPE html>
<html>
  <head>
    <script src="js/mail-generator.js"></script>
    <link href="css/style.css" rel="stylesheet" media="screen">
    <script>
    /*jshint esversion: 6*/
    window.onload = function ( ) {
      for (let i=0; i<10; i++) {

          const date = document.createElement ('div');
          date.className = 'when';
          date.innerHTML = `DATE: ${window.geemails[1].date}`
          main.appendChild (date);
          const send = document.createElement ('span');
          send.className = 'who';
          send.innerHTML = `Sender: ${window.geemails}`[i].sender;
          main.appendChild (send);
          const sub = document.createElement ('span');
          sub.className = 'what';
          sub.innerHTML = `Subject: ${window.geemails}`[i].subject;
          main.appendChild (sub);
          const bodyButton = document.createElement ('button');
          bodyButton.className = 'button';
          bodyButton.innerHTML = 'Show Body:';
          sub.appendChild (bodyButton);
          const bod = document.createElement ('span');
          bod.style.display = 'none';
          bod.className = 'why';
          bod.innerHTML = window.geemails[i].body;
          sub.appendChild (bod);
        }

        function generate (arr) {
          const newDate = document.createElement ('div');
          newDate.className = 'when';
          newDate.innerHTML = 'Date: ' +arr[Math.floor(Math.random ()*10)].date;
          main.appendChild (newDate);
          const newSend = document.createElement ('span');
          newSend.className = 'who';
          newSend.innerHTML = 'Sender: ' + arr[Math.floor(Math.random() *10)].sender;
          main.appendChild(newSend);
          const newSub = document.createElement ('span');
          newSub.className ='what';
          newSub.innerHTML = ' Subject: ' + arr[Math.floor(Math.random()*10)].subject;
          main.appendChild (newSub);
          const newButton = document.createElement ('button');
          newButton.className = 'button';
          newButton.innerHTML = 'Show Body:';
          newSub.appendChild (newButton);
          const newBody = document.createElement ('span');
          newBody.style.display = 'none';
          newBody.className = 'why';
          newBody.innerHTML = arr[Math.floor(Math.random()*10)].body;
          newSub.appendChild (newBody);
        }

          window.setInterval(function(){
            generate (window.geemails);
            console.log (document.getElementsByClassName ('why').length);
            const newCount = document.getElementById('count');
            newCount.innerHTML = 'Messages ' + geemailsLoaded.length;
            for (i=0; i<hideBody.length; i++) {
             hideBody[i].addEventListener ('click', hide);
            }
          },6000);

        const hideBody = document.getElementsByClassName ('what');

        function hide ( ) {
          const elem = this.querySelectorAll('.why')[0];
          if (elem.style.display === 'none') {
            elem.style.display = 'block';
          } else {
            elem.style.display = 'none';
          }
        }

        for (i=0; i<hideBody.length; i++) {
          hideBody[i].addEventListener ('click', hide);
        }

        const geemailsLength = window.geemails.length;  //test geemail length
        console.log(geemails.length);
        const geemailsLoaded = document.getElementsByClassName ("why");
        console.log (geemailsLoaded.length);



        const inbox = document.createElement ('span');
        inbox.id = "mails";
        inbox.innerHTML = geemailsLoaded.length;
        count.appendChild (inbox);



      };
    </script>
  </head>
  <body>
    <div id="head"><h1>GeeMail</h1></div>
    <div> <br></div>
    <div id="count">Messages:</div><br>
    <div id="full">
      <div class="container" id="main">
  </div>
  <div id='footer'>Adam Doyle </div>
  </body>
</html>
